/*
	https://github.com/hi098123/Tistory_Comment
	License : MIT
*/
var hi098123_id,hi098123_id2,tistory_hi098123_comment=[],rps_finder=[],Comment_option={link:!0,prevent_rp_del:!1,remove_report:!1,comment_urls:0,comment_urls_open:0},comment_history={node:"",code:""};function rplc_(e,r,t){return e.split(r).join(t)}function hi098123_comment(e,r){comment_history={node:e,code:r};var t=document.createElement("div"),n=document.createElement("div"),_=document.createElement("div");t.innerHTML=r,n.innerHTML=t.querySelector("s_rp2_container").innerHTML,t.querySelector("s_rp2_container").innerHTML="";for(var o=0;o<tistory_hi098123_comment.length;o++){var m=t.innerHTML,c=tistory_hi098123_comment[tistory_hi098123_comment[o]];if(m=rplc_(m,"[#_rp_rep_id_#]",tistory_hi098123_comment[o]),m=rplc_(m,"[#_rp_rep_logo_#]",c.logo),m=rplc_(m,"[#_rp_rep_class_#]",c.cls),Comment_option.link)m=rplc_(m,"[#_rp_rep_name_#]",c.name);else(l=document.createElement("a")).innerHTML=c.name,m=rplc_(m,"[#_rp_rep_name_#]",l.innerText);if(m=Comment_option.remove_report?rplc_(m,"[#_rp_rep_date_#]",c.date.split("<")[0]):rplc_(m,"[#_rp_rep_date_#]",c.date),isNaN(Comment_option.comment_urls))m=rplc_(m,"[#_rp_rep_desc_#]",urlfy(c.comm,Comment_option.comment_urls));else switch(Comment_option.comment_urls){case 1:m=rplc_(m,"[#_rp_rep_desc_#]",urlfy(c.comm,[TistoryBlog.url.split("/")[2],TistoryBlog.tistoryUrl.split("/")[2]]));break;case 2:m=rplc_(m,"[#_rp_rep_desc_#]",urlfy2(c.comm));break;case 0:default:m=rplc_(m,"[#_rp_rep_desc_#]",c.comm)}m=rplc_(m,"[#_rp_rep_onclick_reply_#]",c.repbtn);var i="";c=tistory_hi098123_comment[tistory_hi098123_comment[o]].rps;m=rplc_(m,"[#_rp_rep_onclick_delete_#]",(Comment_option.prevent_rp_del&&c.length?"S":"_")+c.delbtn);for(var p=0;p<c.length;p++){var l,s=n.innerHTML;if(s=rplc_(s,"[#_rp_rep_id_#]",c[p]),s=rplc_(s,"[#_rp_rep_logo_#]",c[c[p]].logo),s=rplc_(s,"[#_rp_rep_class_#]",c[c[p]].cls),Comment_option.link)s=rplc_(s,"[#_rp_rep_name_#]",c[c[p]].name);else(l=document.createElement("a")).innerHTML=c[c[p]].name,s=rplc_(s,"[#_rp_rep_name_#]",l.innerText);if(s=Comment_option.remove_report?rplc_(s,"[#_rp_rep_date_#]",c[c[p]].date.split("<")[0]):rplc_(s,"[#_rp_rep_date_#]",c[c[p]].date),isNaN(Comment_option.comment_urls))s=rplc_(s,"[#_rp_rep_desc_#]",urlfy(c[c[p]].comm,Comment_option.comment_urls));else switch(Comment_option.comment_urls){case 1:s=rplc_(s,"[#_rp_rep_desc_#]",urlfy(c[c[p]].comm,[TistoryBlog.url.split("/")[2],TistoryBlog.tistoryUrl.split("/")[2]]));break;case 2:s=rplc_(s,"[#_rp_rep_desc_#]",urlfy2(c[c[p]].comm));break;case 0:default:s=rplc_(s,"[#_rp_rep_desc_#]",c[c[p]].comm)}s=rplc_(s,"[#_rp_rep_onclick_delete_#]",(Comment_option.prevent_rp_del&&p<c.length-1?"S":"_")+c[c[p]].delbtn),s=rplc_(s,"<s_rp2_rep>",""),i+=s=rplc_(s,"</s_rp2_rep>","")}_.innerHTML+=m,_.querySelector("s_rp2_container").outerHTML=i}_.innerHTML=rplc_(_.innerHTML,"<s_rp_rep>",""),_.innerHTML=rplc_(_.innerHTML,"</s_rp_rep>","");var a=document.querySelector(".tt_more_preview_comments_wrap")||"";""!=a&&(a.setAttribute("onclick",rplc_(a.getAttribute("onclick"),"getEntryCommentsByPaging","_getEntryCommentsByPaging")),a=a.outerHTML),document.querySelector(e).innerHTML=a+_.innerHTML,hi098123_id=void 0,hi098123_id2=void 0}function SdeleteComment(){alert(decodeURIComponent(escape(atob("64u16riA7J20IOyeiOuKlCDrjJPquIDsnYAg7IiY7KCVL+yCreygnO2VoCDsiJgg7JeG7Iq164uI64ukLg=="))))}
function urlfy(e,r){return e.replace(/(https?:\/\/[^\s<"']+)/g,function(e){for(var t=0;t<r.length;t++)return r[t]==e.split("/")[2]?'<a href="'+e+'" target="'+(1==Comment_option.comment_urls_open?"_blank":"_self")+'">'+e+"</a>":e})}function urlfy2(e){return e.replace(/(https?:\/\/[^\s<"']+)/g,function(e){return'<a href="'+e+'" target="'+(1==Comment_option.comment_urls_open?"_blank":"_self")+'">'+e+"</a>"})}function _getEntryCommentsByPaging(e){getEntryCommentsByPaging(e),comment_refresh(500)}function _deleteComment(e){var r="comment"+e,t="<b>수정 / 삭제된 댓글입니다. 새로고침(F5) 해주세요</b>";if(null==tistory_hi098123_comment[r])tistory_hi098123_comment[rps_finder[r]].rps[r].comm=t;else{tistory_hi098123_comment[r].comm=t;for(var n=tistory_hi098123_comment[r].rps,_=0;_<n.length;_++)n[n[_]].comm=t}deleteComment(e)}function comment_refresh(e){if(""!=comment_history.node&&""!=comment_history.code)var r=100,t=setInterval(function(){--r<1&&clearInterval(t);var n=document.querySelectorAll(comment_history.node+" script");if(n.length>0){for(var _=0;_<n.length;_++){var o=document.createElement("script");o.innerHTML=n[_].innerHTML,document.body.appendChild(o)}setTimeout(function(){tistory_hi098123_comment.sort(function(e,r){return e>r?1:e<r?-1:0}),hi098123_comment(comment_history.node,comment_history.code)},e),clearInterval(t)}},300)}!function(){var e=setInterval(function(){""!=openWindow&&(openWindow.addEventListener("beforeunload",function(e){comment_refresh(3e3)}),clearInterval(e))},3e3)}();